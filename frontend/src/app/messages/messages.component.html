<main class="flex items-center justify-center">

    <div class="relative h-full flex flex-col items-center top-16">
        <!-- Messages body -->
        <div class="flex flex-col items-center md:translate-x-0 transition-transform duration-300 ease-in-out" :class="msgSidebarOpen ? 'translate-x-1/3' : 'translate-x-0'">
                <div class="border border-gray-200 w-[600px]">
                <!-- Header -->
                <div class="sticky flex items-center justify-center bg-slate-50 border-b border-slate-200 dark:border-slate-700 px-4 sm:px-6 md:px-5 h-16">
                    <div class="flex items-center justify-between bg-slate-50 border-b border-slate-200 dark:border-slate-700 px-4 sm:px-6 md:px-5 h-16">
                    </div>
                </div>
                <div class="mt-[50px] mb-[25px] flex flex-col items-center">
                    <video #loopVideo width="300" height="300" loop muted autoplay>
                      <source id="loopVideoSource" src="../assets/waiting_avatar3.mp4" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                    
                    <button (click)="playSecondVideo()" ></button>
                    
                    <video #secondVideo width="300" height="300" (ended)="onSecondVideoEnded()" muted>
                      <source src="../assets/result_voice_generated.mp4" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                </div>

                <!-- Body -->
                <div class="h-[400px]  overflow-y-auto px-4 sm:px-6 md:px-5 py-6">
                    <!-- Chat msg -->
                    <app-chat-messages *ngFor="let message of userMessages" [message]="message"></app-chat-messages>
                </div>
                  <!-- Footer -->
                  <div class="sticky bottom-0">
                    <div class="flex items-center justify-between bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-700 px-4 sm:px-6 md:px-5 h-16">
                        <!-- Message input -->
                        <form [formGroup]="uploadForm" (ngSubmit)="onSubmit($event)" class="grow flex" autocomplete="off">
                            <div class="grow mr-3">
                                <label for="message-input" class="sr-only">Type a message</label>
                                <input formControlName="userMessage" id="message-input" class="form-input p-3 w-full bg-slate-100 dark:bg-slate-800 border-transparent dark:border-transparent focus:bg-white dark:focus:bg-slate-800 placeholder-slate-500" type="text" placeholder="Write a message..." autocomplete="off" />
                            </div>
                            <button 
                                type="submit" 
                                [disabled]="showSpinner" 
                                [class.opacity-50]="showSpinner" 
                                [class.hover:bg-indigo-600]="!showSpinner" 
                                class="btn p-2 bg-indigo-500 text-white whitespace-nowrap relative">
                                <span class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2" *ngIf="showSpinner">
                                    <span class="loader"></span>
                                </span>
                                Send ->
                            </button>
                        </form>                          
                    </div>
                  </div>
            </div>
            </div>
        </div>
</main>